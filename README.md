# Employee Attrition Using Monte Carlo Simulations
## Our goals in this project are:
1. Understand how Monte Carlo Simulations work
2. Create an example Employee Database
3. Use Monte Carlo methodology to predict attrition

This is a basic implementation of Monte Carlo methodology to forecast employee attrition. Statistical models are a respectable choice given the problem set. The advantages to this model over an ML classifier is firstly that this is a logic-driven methodology which can be easily explained or justified. Secondly, this implementation is fairly efficient, producing usable visualizations in minutes. This is a good method to use in tandem with Machine Learning solutions, either as a baseline or to affect model weights.

### Understanding Monte Carlo

A brief summary of the thought process behind Monte Carlo simulations from [britannica.com](https://www.britannica.com/science/Monte-Carlo-method):

> "American scientist Stanislaw Ulam wondered what was the probability of winning a game of solitaire and realized that simply playing a number of games and noting the percentage of winning games would be much simpler than trying to calculate all the possible combinations of cards. He then further realized that such an approach could be applied to problems such as the production and diffusion of neutrons in radioactive material, a problem in which at each step there were so many possibilities that a solution was impossible to calculate."
> "The likelihood of a particular solution can be found by dividing the number of times that solution was generated by the total number of trials. By using larger and larger numbers of trials, the likelihood of the solutions can be determined more and more accurately."

The number of factors that contribute to the probability of an employee resigning from a position (voluntarily or involuntarily) are so numerous that it is impossible to perfectly capture the impact of every variable. In a problem like this, a machine learning solution seems like a good fit given the ability to estimate weights for many variables at once to make a prediction. Depending on the desired level of justification or explainability of results, statistical models like Monte Carlo provide a logical flow of operations. __The more easily understandable the solution is, the more likely people are to accept the results.__ Using a Monte Carlo Simulation here allows us to estimate the solution to a complex problem using simple statistical and probablistic methods, and sets a baseline for a potential machine learning solution.

### Create a Synthetic Employee Database

Let's install pandas and random for Monte Carlo probabilities, and matplotlib for some visualization at the end.

    import pandas as pd
    import random as rand
    import matplotlib.pyplot as plt

We create a list of one thousand employee IDs, "Emp 1" through "Emp 1001".

    emps = 1000
    emplist = ['Emp ' + str(i) for i in range(1,emps+1)]

Choose an attrition rate, in this case about 3%, and create a new field for our employee database called "Loss" (from losslist). Use a '1' to notate 'attrited' and '0' to notate 'retained'. __Our employee database is now complete.__ 

    attr_prob = .03141592653
    losslist = rand.choices([1,0], weights=[attr_prob, 1-attr_prob], k=emps)
    df = pd.DataFrame({'Emplid':emplist, 'Loss':losslist})

![Our simple database:](https://github.com/maxwellabgit/Employee-Attrition/blob/main/Figure_5.png)

### Use Monte Carlo Methodology to Predict Attrition

Here is where the casino comes in. Monte Carlo works by calculating a normal distribution using known probabilities and quantities. By calculating the attrition rate this time period and applying it to the employees in the next period, we can calculate a distribution and associated confidence level.

Let's initialize some empty lists for our simulations.

    y_i = []
    y_ii = []
    y_iii = []
    y_iv = []

We apply the overall attrition rate from our last time step to this one. For example, if we had a 3% attrition rate last time period, then I will point to every employee we retained and gained in this current time period and predict attrition with a coin flip weighted 97:3. After making a prediction for each employee, I aggregate the results to the total attrited vs retained (it should be close to 3.14%, but won't always) and visualize to obtain a __simulation__ of what would happen if our attrition rate was the same as last time. We can now __quantify our confidence__ in our estimated attrition rate based on our historical data.

> [!IMPORTANT]
> I can repeat the process as many times as I choose to increase the simulation's fidelity until we visualize attrition values in a normal distribution.

For each employee, flip a coin weighted 97:3 and record the outcome. Afterwards, use plt.hist and plt.show to present our visualization.

    for i in range(5):
        y_i.append(sum(rand.choices([1,0], weights=[attr_prob, 1-attr_prob], k=emps)))
    plt.hist(y_i, bins=128)
    plt.show()

![After 5 iterations](https://github.com/maxwellabgit/Employee-Attrition/blob/main/Figure_1.png)

    for i in range(10):
        y_ii.append(sum(rand.choices([1,0], weights=[attr_prob, 1-attr_prob], k=emps)))
    plt.hist(y_ii, bins=128)
    plt.show()

![After 10 iterations](https://github.com/maxwellabgit/Employee-Attrition/blob/main/Figure_2.png)

    for i in range(500):
        y_iii.append(sum(rand.choices([1,0], weights=[attr_prob, 1-attr_prob], k=emps)))
    plt.hist(y_iii, bins=128)
    plt.show()

![After 500 iterations](https://github.com/maxwellabgit/Employee-Attrition/blob/main/Figure_3.png)

500 iterations starts to look more like a normal distrubution. Pushing iterations up to 5000 gives us an even nicer bell curve with a peak around 3.14% attrition, or 31.4 attrited employees. Our confidence is determined by how close we are to the peak. I can have high confidence in our attrition rate being near 31.4, and low confidence towards the extremeties.

    for i in range(5000):
        y_iv.append(sum(rand.choices([1,0], weights=[attr_prob, 1-attr_prob], k=emps)))
    plt.hist(y_iv, bins=128)
    plt.show()

![After 5000 iterations](https://github.com/maxwellabgit/Employee-Attrition/blob/main/Figure_4.png)


## Summary

Monte Carlo is a useful approach for many data problems. Firstly for the purpose of building explainable systems, and secondly because it is a widely-used technique which can serve as a fine baseline. This model can be used to aid weights optimization, exploratory correlation analyses, and much more beyond the scope of this mini demonstration.

In our process, the number of employees is free to change quarter to quarter, year to year, etc. However, the ratio is derived from previous time frames. This is the logical basis for establishing a statistical prediction of the likely outcomes. A core factor of this model is how we utilize the historical dataset in relation to our applied probability in the Monte Carlo Simulation. In the real world, I might start with a weighted average to give more influence to the most recent time frames. In the end, the number of variables that contribute to employee attrition are nearly endless, and many are quantifiable.
